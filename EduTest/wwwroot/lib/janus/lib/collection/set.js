// Generated by CoffeeScript 1.12.2
(function() {
  var List, Set, Varying, util,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Varying = require('../core/varying').Varying;

  List = require('./list').List;

  util = require('../util/util');

  Set = (function(superClass) {
    extend(Set, superClass);

    function Set() {
      return Set.__super__.constructor.apply(this, arguments);
    }

    Set.prototype._initialize = function() {
      this._watched = [];
      return this._watchers = [];
    };

    Set.prototype.add = function(elems) {
      var elem, i, len, widx;
      if (!util.isArray(elems)) {
        elems = [elems];
      }
      for (i = 0, len = elems.length; i < len; i++) {
        elem = elems[i];
        if (!(!this.has(elem))) {
          continue;
        }
        widx = this._watched.indexOf(elem);
        if (widx >= 0) {
          this._watchers[widx].set(true);
        }
        List.prototype.add.call(this, elem);
      }
      return elems;
    };

    Set.prototype.remove = function(elem) {
      var idx, widx;
      widx = this._watched.indexOf(elem);
      if (widx >= 0) {
        this._watchers[widx].set(false);
      }
      idx = this.list.indexOf(elem);
      if (!(idx >= 0)) {
        return void 0;
      }
      return List.prototype.removeAt.call(this, idx);
    };

    Set.prototype.putAll = function(elems) {
      var i, len, list, x;
      list = this.list.slice(0);
      if (!util.isArray(elems)) {
        elems = [elems];
      }
      for (i = 0, len = list.length; i < len; i++) {
        x = list[i];
        if (elems.indexOf(x) < 0) {
          this.remove(x);
        }
      }
      return this.add(elems);
    };

    Set.prototype.has = function(elem) {
      return this.list.indexOf(elem) >= 0;
    };

    Set.prototype.watchHas = function(elem) {
      var v;
      v = new Varying(this.has(elem));
      this._watched.push(elem);
      this._watchers.push(v);
      return v;
    };

    Set.prototype.at = void 0;

    Set.prototype.watchAt = void 0;

    Set.prototype.removeAt = void 0;

    Set.prototype.move = void 0;

    Set.prototype.moveAt = void 0;

    Set.prototype.put = void 0;

    return Set;

  })(List);

  module.exports = {
    Set: Set
  };

}).call(this);
